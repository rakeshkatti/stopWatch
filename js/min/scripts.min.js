var stopwatch=angular.module("stopwatch",[]);stopwatch.controller("appController",function(s){function t(){s.timer={hours:0,minutes:0,seconds:0,ms:0}}s.laps=[],s.splits=[],s.identity=angular.identity,t();var e,i,r=0,n=-999,o=0,l={};$("#start").on("click",function(){$("#start,#stop").toggle(),$("#lap,#split").removeClass("disabled"),$("#reset").addClass("disabled")}),s.startTimer=function(){if(s.timer.ms||s.timer.seconds||s.timer.ms){if(!n)return;r=Date.now()+r-n}else r=Date.now();n=0,e=setInterval(function(){s.$apply(function(){i=Date.now()-r,s.timer={ms:i%1e3,seconds:Math.floor(i/1e3)%60,minutes:Math.floor(i/1e3/60)%60,hours:Math.floor(i/1e3/60/60)%60}})},1)},s.stopTimer=function(){if($("#start,#stop").toggle(),$("#reset").removeClass("disabled"),$("#lap,#split").addClass("disabled"),s.splits.length>0&&(l={splitindex:o++,hours:s.timer.hours,minutes:s.timer.minutes,seconds:s.timer.seconds,ms:s.timer.ms},s.splits.push(l)),s.laps.length>0){var t=[];if(s.splits.length>0)for(var i=0;i<s.splits.length;i++)t.push(s.splits[i]);s.splits=[],l={splitindex:o++,hours:s.timer.hours,minutes:s.timer.minutes,seconds:s.timer.seconds,ms:s.timer.ms},t.push(l),s.laps.push(t)}clearInterval(e),n=Date.now()},s.resetTimer=function(){n&&(s.laps=[],s.splits=[],t())},s.lapTimer=function(){if(0===n){var i=[];if(s.splits.length>0)for(var r=0;r<s.splits.length;r++)i.push(s.splits[r]);s.splits=[],l={lapindex:o++,hours:s.timer.hours,minutes:s.timer.minutes,seconds:s.timer.seconds,ms:s.timer.ms},i.push(l),s.laps.push(i),console.log(s.laps),clearInterval(e),t(),s.startTimer()}},s.splitTimer=function(){0===n&&(l={splitindex:o++,hours:s.timer.hours,minutes:s.timer.minutes,seconds:s.timer.seconds,ms:s.timer.ms},s.splits.push(l),console.log(s.splits))}}),stopwatch.filter("orderObjectBy",function(){return function(s,t,e){var i=[];return angular.forEach(s,function(s){i.push(s)}),i.sort(function(s,e){return s[t]>e[t]}),e&&i.reverse(),i}});